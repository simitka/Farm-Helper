#!/bin/zsh

# –í—ã–¥–∞–µ–º –≤—Å–µ–º .sh —Ñ–∞–π–ª–∞–º –≤ –ø–∞–ø–∫–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
find . -type f -name "*.sh" -exec chmod +x {} \;

# –ü–æ–¥—Å–∫–ª—é—á–∞–µ–º utils.sh
source ./bashScript/utils.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞
if [[ $# -ne 2 ]]; then
  echo "‚ùå –û—à–∏–±–∫–∞: –í–æ –≤—Ä–µ–º—è –≤—ã–∑–æ–≤–∞ —Å–∫—Ä–∏–ø—Ç–∞ –ø–µ—Ä–µ–¥–∞–Ω—ã –Ω–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (—Å–æ–æ–±—â–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–∫—Ä–∏–ø—Ç–∞)"
  exit 1
fi

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞
settings_file="$1"
actual_tag_version="$2"

# –û—á–∏—â–∞–µ–º –∫–æ–Ω—Å–æ–ª—å
clear

# –í—ã–≤–æ–¥–∏–º –º–µ–Ω—é –≤—ã–±–æ—Ä–∞
while true; do
  echo "Farm Helper v$actual_tag_version"

  dim_text "–ß—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞–∂–º–∏—Ç–µ Control‚åÉ + C"
  dim_text "–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤–≤–µ–¥–∏—Ç–µ 'farmx' –≤ –¢–µ—Ä–º–∏–Ω–∞–ª–µ"
  echo
  bold_text "–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ü–∏—Ñ—Ä—É:"
  echo "    [1] –ü–æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
  echo "    [2] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
  echo "    [3] –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
  echo "    [4] –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ DeepLink"
  echo "    [5] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Proxy –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ"
  echo "    [6] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å –ø–æ–º–æ—â—å—é DeepLink (FAR-4168)"
  echo "    [7] –ß—Ç–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∞–π–ª–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –ø–æ ADB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
  echo "    [8] –°–∫–∞—á–∞—Ç—å –¥–∞–º–ø logcat –ª–æ–≥–æ–≤ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
  echo "    [9] –ü–æ—á–∏—Å—Ç–∏—Ç—å logcat –ª–æ–≥–∏ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª"
  echo "    [10] –£–¥–∞–ª–∏—Ç—å –∫—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Unity Editor"

  # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  echo -n "üìù –í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É: "
  read choice

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤–≤–æ–¥ —á–∏—Å–ª–æ–º –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–Ω –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
  if [[ "$choice" =~ ^[0-9]+$ && "$choice" -ge 1 && "$choice" -le 10 ]]; then
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    case "$choice" in
    1)
      choose_adb "./bashScript/clearCache.sh"
      ;;
    2)
      choose_adb "./bashScript/installApp.sh"
      ;;
    3)
      choose_adb "./bashScript/uninstallApp.sh"
      ;;
    4)
      choose_adb "./bashScript/openDeeplink.sh"
      ;;
    5)
      choose_adb "./bashScript/setGlobalProxy.sh"
      ;;
    6)
      echo "‚è≥ –ó–∞–ø—É—Å–∫–∞—é —Å–∫—Ä–∏–ø—Ç changeLevel.sh..."
      #./changeLevel.sh
      dotnet script dotnetScript/changeLevelDeeplink.csx --no-cache

      ;;
    7)
      clear
      ./bashScript/chooseProfile.sh
      ;;
    8)
      choose_adb "./bashScript/logcatDump.sh"
      ;;
    9)
      choose_adb "./bashScript/logcatReader.sh"
      ;;
    10)
      ./bashScript/deleteUnityCache.sh
      ;;
    esac
    break # –í—ã—Ö–æ–¥ –∏–∑ —Ü–∏–∫–ª–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
  else
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞
    clear
    red_bg "$(bold_text '‚ùå –û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 10 –∏ –Ω–∞–∂–º–∏—Ç–µ Enter‚Üµ ')"
    red_bg "$(bold_text '==============================================================')"
    echo
    echo
  fi
done
